---
title: password组件输入框组件
date: 2018-06-09 15:10
categories: 编程
tags: [组件]
---

### 设计思路
1. 输入
2. 粘贴
3. 密码框长度可控、样式可控（默认样式）
4. 是否需要加密（密码框数字加密、验证码不需要加密）
5. 是否需要对输入的验证码进行前端校验（设置支付密码时需要，填写密码时不需要）
6. 针对错误信息，当出现错误信息时，密码框设置为初始状态，当点击密码框时，错误信息消失
7. 设置支付密码页面，有两个组件，输入密码和确认密码

### 实现

### 问题
1. 提现验证页面，当是组合验证时，调用密码框之后，再次调用短信弹框时，由于和密码框底层使用的是同一个组件，导致组件会执行两次，dom元素被创建两次。
    1. 问题根本原因：
         * this.$passwordBlock = document.querySelectorAll('.password-virbox span'); 这个方法是获取页面的所有password-virbox元素下的span，所以当弹出短信弹框时，获取到的span元素并不是想要的。
    2. 如何解决：
        * 通过每个实例获取dom元素。
2. 设置支付密码页面，有两个组件，输入密码和确认密码
    1. 存在问题
        * 光标同时存在的输入和确认密码的框中
        * 报错信息展示问题，原则是：有报错，清空密码框。但是当密码不一致时，该如何报错，以及清空密码输入框